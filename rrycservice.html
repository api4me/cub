<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=Uur8Z3tVp5PLCPnvzHaubL6h"></script>
<script type="text/javascript" src="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.js"></script>
<link rel="stylesheet" href="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.css" />
<title>仁人易车尊容卡服务网点</title>
<style type="text/css">
body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;}
#l-map{height:100%;width:78%;float:left;border-right:2px solid #bcbcbc;}
#r-result{height:100%;width:20%;float:left;}
</style>
</head>
<body>
<div id="l-map"></div>
<div id="r-result">
    <h3> 会员服务 </h3>
    <div>
        仁人易车旗下车友会品牌：尊荣汇。尊荣汇会员可在如下合作商户享受优惠与尊荣服务, 加入尊荣汇，汽车优惠享不停。
    </div>
    <form>
        <input type="radio" name="service" value="all" onclick="changeLayer('all');" checked="true">所有服务</input>
        <br/>
        <input type="radio" name="service" value="xiche" onclick="changeLayer('xiche');">洗车与美容</input>
        <br/>
        <input type="radio" name="service" onclick="changeLayer('xiuli');" value="xiuli">修理与换胎</input>
    </form>
    <br/>
    <a href="http://www.renrenyiche.com/service.xlsx" target="_blank">合作伙伴目录下载</a>
</div>
</body>
</html>
<script type="text/javascript">

// 百度地图API功能
var map = new BMap.Map("l-map");                // 创建Map实例

var xicheLayer = new BMap.CustomLayer({
    geotableId: 70634,   
    q: '',  
    tags: '',  
    filter: ''
});
xicheLayer.addEventListener('onhotspotclick',callback);//单击图层事件

var xiuliLayer = new BMap.CustomLayer({
    geotableId: 70633,   
    q: '',  
    tags: '',  
    filter: ''
});
xiuliLayer.addEventListener('onhotspotclick',callback);

var allLayer = new BMap.CustomLayer({
    geotableId: 70635,   
    q: '',  
    tags: '',  
    filter: ''
});
allLayer.addEventListener('onhotspotclick',callback);

// var customLayer=new BMap.CustomLayer({  
//     geotableId: 66426,   
//     q: '', //检索关键字  
//     tags: '', //空格分隔的多字符串  
//     filter: '' //过滤条件,参考http://developer.baidu.com/map/lbs-geosearch.htm#.search.nearby  
// }); 

var currentLayer = 'all';
map.addTileLayer(xiuliLayer);
map.addTileLayer(xicheLayer);  //添加自定义图层 

// customLayer.addEventListener('onhotspotclick',callback);//单击图层事件

var point = new BMap.Point(118.790435,32.048177);     // 创建点坐标
map.centerAndZoom(point,14);                     // 初始化地图,设置中心点坐标和地图级别。
map.addControl(new BMap.NavigationControl()); // 添加平移缩放控件
map.addControl(new BMap.ScaleControl()); // 添加比例尺控件
map.addControl(new BMap.OverviewMapControl()); //添加缩略地图控件
map.enableScrollWheelZoom(); //启用滚轮放大缩小
map.addControl(new BMap.MapTypeControl()); //添加地图类型控件
map.setCurrentCity("南京"); // 设置地图显示的城市 此项是必须设置的
map.enableScrollWheelZoom();                     //启用滚轮放大缩小

function callback(e)//单击热点图层
{
        var customPoi = e.customPoi;//poi的默认字段
        var contentPoi=e.content;//poi的自定义字段
        var content = '<p style="width:280px;margin:0;line-height:20px;">地址：'+contentPoi.address + '<br/>优惠内容：'+contentPoi.vipcontent+'</p>';
        var searchInfoWindow = new BMapLib.SearchInfoWindow(map, content, {
            title: customPoi.title, //标题
            width: 290, //宽度
            height: 40, //高度
            panel : "panel", //检索结果面板
            enableAutoPan : true, //自动平移
            enableSendToPhone: true, //是否显示发送到手机按钮
            searchTypes :[
                BMAPLIB_TAB_SEARCH,   //周边检索
                BMAPLIB_TAB_TO_HERE,  //到这里去
                BMAPLIB_TAB_FROM_HERE //从这里出发
            ]
        });
        var point = new BMap.Point(customPoi.point.lng, customPoi.point.lat);
        searchInfoWindow.open(point);
}

function changeLayer(type) {
    if (type === currentLayer) {
        return;
    }

    var srcLayer = getLayer(currentLayer);
    var targetLayer = getLayer(type);

    if (type === 'all') {
        map.removeTileLayer(srcLayer);
        map.addTileLayer(xiuliLayer);
        map.addTileLayer(xicheLayer); 
    } else {
        if (currentLayer === 'all') {
            map.removeTileLayer(xiuliLayer);
            map.removeTileLayer(xicheLayer);
        } else {
            map.removeTileLayer(srcLayer);  
        }
         map.addTileLayer(targetLayer);
    }

    
    currentLayer = type;

}

function getLayer(type) {
    if (type === 'all') {
        return allLayer;    
    } else if (type === 'xiche') {
        return xicheLayer;
    } else if (type === 'xiuli') {
        return xiuliLayer;
    }
}
</script>
